---
version: '1'

services:
  echo:
    build: ../dial-sdk/examples/echo
  core:
    ports:
      - "8080:8080"
    image: epam/ai-dial-core:0.2.1
    environment:
      'JAVA_OPTS': '-Dgflog.config=/opt/core/gflog.xml'
      'proxy.config.files': '["/opt/core/config.json"]'
    volumes:
      - ${DIAL_DIR:-.}/core:/opt/core:Z
      - ${DIAL_DIR:-.}/core-logs/:/opt/epam/aidial/log:Z
  notebooks:
    depends_on:
      echo:
        condition: service_healthy
      core:
        condition: service_healthy
    build: python-notebooks-runner
    environment:
      'DIAL_URL': 'http://core:8080'
    volumes:
      - ./examples:/opt/examples:Z