<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Cookbook/dial-cookbook/examples/how_to_call_text_to_image_applications" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">How to call text-to-image DIAL applications | DIAL Knowledge Base</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.epam-rail.com/Cookbook/dial-cookbook/examples/how_to_call_text_to_image_applications"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="AI DIAL, RAG, GenAI, AI platform, EPAM DIAL"><meta data-rh="true" name="summary" content="AI DIAL is a secure, enterprise-grade and open-source platform. It has an API-first, cloud and model-agnostic design that makes it suitable for a wide variety of use cases. "><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to call text-to-image DIAL applications | DIAL Knowledge Base"><meta data-rh="true" name="description" content="From this notebook, you will learn how to call text-to-image"><meta data-rh="true" property="og:description" content="From this notebook, you will learn how to call text-to-image"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.epam-rail.com/Cookbook/dial-cookbook/examples/how_to_call_text_to_image_applications"><link data-rh="true" rel="alternate" href="https://docs.epam-rail.com/Cookbook/dial-cookbook/examples/how_to_call_text_to_image_applications" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.epam-rail.com/Cookbook/dial-cookbook/examples/how_to_call_text_to_image_applications" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://8ZBWD7ULLD-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GVY5VWYV1E"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GVY5VWYV1E",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="DIAL Knowledge Base" href="/opensearch.xml">

<script src="https://cookie-cdn.cookiepro.com/consent/3a34bbfa-93e4-4ba6-9383-7da88d67ed18/OtAutoBlock.js"></script>
<script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="3a34bbfa-93e4-4ba6-9383-7da88d67ed18"></script>
<script src="src/scripts/optanonWrapper.js"></script><link rel="stylesheet" href="/assets/css/styles.0e24e261.css">
<script src="/assets/js/runtime~main.53449f3d.js" defer="defer"></script>
<script src="/assets/js/main.9a9f705f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/dialx-logo.svg" alt="EPAM DIAL" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/dialx-logo.svg" alt="EPAM DIAL" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/search?q=org%3Aepam++DIAL&amp;type=repositories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/hgqEAbEwZ9" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.youtube.com/@TeamDialX" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/supported-models">Supported Models</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/tutorials/quick-start-with-application">Tutorials</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/user-guide">Chat User Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chat-design">AI DIAL Chat Design Structure Guidelines</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://github.com/epam/ai-dial-helm/tree/main/charts/dial/examples/generic/simple" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false">Deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/Cookbook/dial-cookbook/examples/how_to_call_text_to_text_applications">Cookbook</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cookbook/dial-cookbook/examples/how_to_call_text_to_text_applications">How to call text-to-text DIAL applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Cookbook/dial-cookbook/examples/how_to_call_text_to_image_applications">How to call text-to-image DIAL applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Cookbook/dial-cookbook/examples/how_to_call_image_to_text_applications">How to call image-to-text DIAL applications</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://epam-rail.com/dial_api" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">API Reference<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/video demos/demos/dial-chathub">Video Demos</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cookbook</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">How to call text-to-image DIAL applications</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to call text-to-image DIAL applications</h1></header><p>From this notebook, you will learn how to call text-to-image
applications via <a href="https://epam-rail.com/dial_api#/paths/~1openai~1deployments~1%7BDeployment%20Name%7D~1chat~1completions/post" target="_blank" rel="noopener noreferrer">DIAL API
chat/completions</a>
call.</p>
<p><strong><a href="https://github.com/epam/ai-dial/blob/main/dial-cookbook/examples/how_to_call_text_to_image_applications.ipynb" target="_blank" rel="noopener noreferrer">View Jupyter
Notebook</a></strong></p>
<p><strong>DIAL application</strong> is a general term, which encompasses model adapters
and applications with any custom logic.</p>
<p>DIAL currently supports a few text-to-image model adapters:</p>
<ul>
<li><a href="https://github.com/epam/ai-dial-adapter-openai/" target="_blank" rel="noopener noreferrer">DALL-E-3</a></li>
<li><a href="https://github.com/epam/ai-dial-adapter-vertexai/" target="_blank" rel="noopener noreferrer">Google Imagen</a></li>
<li><a href="https://github.com/epam/ai-dial-adapter-bedrock/" target="_blank" rel="noopener noreferrer">Stability
diffusion</a></li>
</ul>
<p>These models follow the same pattern of usage: they take the last user
message as a prompt for image generation and return the generated image
in the response.</p>
<p>For example purposes, we are going to use a sample text-to-image
application called <code>render-text</code> which prints the user prompt as an
image.</p>
<p>The application returns: 1. <strong>completion text</strong> with a Markdown image
link to the generated image, 2. <strong>file attachment</strong> which contains
either * a base64-encoded image or * a URL to the image stored in the
DIAL storage.</p>
<p>The format of the image attachment is controlled by the user message,
which is expected to have the following format:
<code>(base64|url),&lt;text to render&gt;</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h2>
<p><strong>Step 1</strong>: install all the necessary dependencies and import the
libraries we are going to use.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">!pip install requests</span><span class="token operator">==</span><span class="token number">2.31</span><span class="token number">.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">!pip install openai</span><span class="token operator">==</span><span class="token number">1.9</span><span class="token number">.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">!pip install langchain</span><span class="token operator">-</span><span class="token plain">openai</span><span class="token operator">==</span><span class="token number">0.0</span><span class="token number">.3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> requests</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> openai</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> langchain_openai</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> IPython</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">display </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> Markdown</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Step 2</strong>: if DIAL Core server is already configured and running, set
env vars <code>DIAL_URL</code> and <code>APP_NAME</code> to point to the DIAL Core server and
the text-to-image application (or model) you want to use.</p>
<p>Otherwise, run the <a href="https://github.com/epam/ai-dial/blob/main/dial-cookbook/docker-compose.yml" target="_blank" rel="noopener noreferrer">docker-compose
file</a>
in a separate terminal to start the <strong>DIAL Core</strong> server locally along
with a sample <strong>render-text</strong> application. The DIAL Core will become
available at <code>http://localhost:8080</code>:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker compose up core render-text</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Step 3</strong>: configure <code>DIAL_URL</code> and <code>APP_NAME</code> env vars. The default
values are configured under the assumption that DIAL Core is running
locally via the docker-compose file.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dial_url </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;DIAL_URL&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;http://localhost:8080&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;DIAL_URL&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> dial_url</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app_name </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;APP_NAME&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;render-text&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;APP_NAME&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> app_name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Step 4</strong>: define helpers to display images in the notebook:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> base64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> IPython</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">display </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> Image </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> IPImage</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> IPython</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">display </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> display</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">display_base64_image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">image_base64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image_binary </span><span class="token operator">=</span><span class="token plain"> base64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">b64decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">image_base64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    display</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">IPImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">data</span><span class="token operator">=</span><span class="token plain">image_binary</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dial-attachments">DIAL attachments<a href="#dial-attachments" class="hash-link" aria-label="Direct link to DIAL attachments" title="Direct link to DIAL attachments">​</a></h2>
<p>The <code>render-text</code> application returns an image in its response. The DIAL
API allows to specify a list of attachment files for each message in the
DIAL request as well as in the message returned in the DIAL response.</p>
<p>The files attached to the request we call <strong>input attachments</strong>. They
are saved at the path
<code>messages/{message_idx}/custom_content/attachments/{attachment_idx}</code>.</p>
<p>And the files attached to the response we call <strong>output attachments</strong>.
They are saved at the path
<code>message/custom_content/attachments/{attachment_idx}</code>.</p>
<p>A single attachment <em>(in our case an image attachment)</em> may either
contain the content of the image encoded in base64:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;type&quot;: &quot;image/png&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;title&quot;: &quot;Image&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;data&quot;: &quot;&lt;base64-encoded image data&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or reference the attachment content via a URL:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;type&quot;: &quot;image/png&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;title&quot;: &quot;Image&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;url&quot;: &quot;&lt;image URL&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The image URL is either 1. a publicly accessible URL or 2. a URL to an
image uploaded to the DIAL Core server beforehand.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="downloading-file-from-the-dial-file-storage">Downloading file from the DIAL file storage<a href="#downloading-file-from-the-dial-file-storage" class="hash-link" aria-label="Direct link to Downloading file from the DIAL file storage" title="Direct link to Downloading file from the DIAL file storage">​</a></h2>
<p>Let’s define a helper method, which downloads an image from the DIAL
file storage given a file URL.</p>
<p>If application returns a relative URL, then it resolves it against the
DIAL Core URL. If the URL points to the DIAL Core server, then we need
to provide the DIAL Core headers to be able to download the file.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> urllib</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">parse </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> urlparse</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">is_relative_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">bool</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    parsed_url </span><span class="token operator">=</span><span class="token plain"> urlparse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">not</span><span class="token plain"> parsed_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">scheme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">not</span><span class="token plain"> parsed_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">netloc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">not</span><span class="token plain"> url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startswith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">download_file_as_base64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dial_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> file_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> dial_headers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">dict</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> is_relative_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">file_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        file_url </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">dial_url</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">/v1/</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">file_url</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    headers </span><span class="token operator">=</span><span class="token plain"> dial_headers </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> file_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startswith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dial_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    response </span><span class="token operator">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">file_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> headers</span><span class="token operator">=</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">raise_for_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    data </span><span class="token operator">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">content</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> base64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">b64encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we demonstrate how to call the application via DIAL API and extract
the image from the response.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-curl">Using Curl<a href="#using-curl" class="hash-link" aria-label="Direct link to Using Curl" title="Direct link to Using Curl">​</a></h2>
<ul>
<li>The application deployment is called <code>app_name</code>.</li>
<li>The local DIAL Core server URL is <code>dial_url</code>.</li>
<li>The OpenAI API version we are going to use is <code>2023-12-01-preview</code>.</li>
</ul>
<p>Therefore, the application is accessible via the url:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">${DIAL_URL}/openai/deployments/${APP_NAME}/chat/completions?api-version=2023-12-01-preview</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-base64-encoded-image-data">Using base64-encoded image data<a href="#using-base64-encoded-image-data" class="hash-link" aria-label="Direct link to Using base64-encoded image data" title="Direct link to Using base64-encoded image data">​</a></h3>
<p>The curl command with a singe message asking for base64-encoded image:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">!curl </span><span class="token operator">-</span><span class="token plain">X POST </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;${DIAL_URL}/openai/deployments/${APP_NAME}/chat/completions?api-version=2023-12-01-preview&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">-</span><span class="token plain">H </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Api-Key:dial_api_key&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">-</span><span class="token plain">H </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Content-Type:application/json&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">-</span><span class="token plain">d </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;base64,Hello world!&quot;}]}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&quot;choices&quot;:[{&quot;index&quot;:0,&quot;finish_reason&quot;:&quot;stop&quot;,&quot;message&quot;:{&quot;role&quot;:&quot;assistant&quot;,&quot;custom_content&quot;:{&quot;attachments&quot;:[{&quot;index&quot;:0,&quot;type&quot;:&quot;image/png&quot;,&quot;title&quot;:&quot;Image&quot;,&quot;data&quot;:&quot;iVBORw0KGgoAAAANSUhEUgAAAMgAAABkCAIAAABM5OhcAAAGHUlEQVR4nO3ZXWhTZxzH8e9psrbaiNham6JFQS2+QDOsbL4N6lYmoiK+i7tQbwrihYoX4o26zgtFtwkrgyobY9NuoAiKgi+1RqlvuImgNxNFC0XxtbMqvrRJdpGDMaenNpX9183+Ppyb8+TJk+ecfGfSzEkkEPnHZfX0BuT9pLDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDExL8dluMwbFinp/9NGW5y2DAcx3wz/xcZhfWWO6u72Zlefmf0USgmFJaYMAlr3z6mTKFfP0Ihpk4lGu3e048eZcYMCgvJzqa4mAULuHjRZ9rYsTgON2+mRn79FcchGOTx49RgbS2OQ01NpusnP/cvXaKsjECAFy/8N7l3r3uN+flUVHD2bPeu8f2XSHR9AEOH+j80dKh3kXXrACZPpqaGb75h9GgCAQ4d8l+q48pffQUwciRbt7JnD19+SThMIMAvv3hfev16gJ07UyNVVQSDAAcPpgbnzwdoasp0fSAcprSUadOoqSEW89nkmjXuNdbW8t13TJpEOMzAgWm3ouOd6VVHZpMyDuvYMYCZM2lvd0daWykuZvBg2tp8lvKcnjqF4xCJ8ORJavD2bcJhcnO5cSPtpc+fB1i0KDVSWsoXX5CdzerV7kg8TkEBH37YjfWTVq7sdJOHDwNUVqauMRZj7lzvf6gKK4NJUFJCS4vPUVKSdvtmzQK4ejXt6Rs2ANTX+7xJntM5cwCOHPFu4PvvAdauTRuMxykuprCQeJxEgtu3Aerq+OQTIhF3zu+/A2zc2I31k+7d63STyWu8cCFthRs3FFbakdmkrryeWVhI//7e+HbvBvj2W583yXM6aBBZWbx86d3AtWsAH3/sHa+qArh8mUSCujqAO3fYsAHH4cEDEgm2bAH4449urA8UFHgv/81NFhURDKb+uXp9hEIKK3UEu64GgKIifvvNZ3zxYu7eTZ22tNDezoABPjOfPev6VR49cr9TewwZ4j7qMXs2O3dSX08kQjTK6NGEw3z6KdXVRKPMm0d9PSUljBvXvfWTiXTm4UMGDiQQ8I7n5/P0adfX2EtkGlZuLhUV/uNvCoWIxzlwwGfm8OFdv0p+Pvfv8+qV971vbnYf9fjsM0IhTpxg7VqiUSorASZMoE8fTp5k5kzOnGH58ndf31ffvjx4QCzmbeuvvzJ6ei/xD//cUFZGayvl5VRUpI5YjGiUtraunz5pEvE4DQ3e8ePHASZP9o7n5DBtGqdP09TEtWtMneoOTpxIQwONjTx/zuzZ776+r0iE9nb3T4fX/vyT1ta0kVu33I/RXiqTz0sy/quwthagujo18uQJo0YRCvHsmc9SntPkL16RCE+fpgbv3CEcJieH69d9NvDzzwArVuA43L/vDm7eDLBsGf36pX2jymT9jhfrGdm1C2D6dPePhkSCtjb3R403b8XXX1Nezv79Pf91p0eOzCZlHFZ7O59/DrBkCT/8wI4djBlDVhZ79rgTcnMJBtm1i5YWn9NEgo0bAUaOZNs26uqornZ/Z/rpJ/8NPHxIIMAHH1BWlho8cwYgEGDhQu/8LtfveLGeTcZi7jVWVvLjj+zYwUcfMX48gwen3Yq8PIDy8p5/j3vkyGxSd34gffWKLVsYM4acHMJhZs2isTH16Lp15OWRm8uVKz6nyePwYaZPp6CAYJCiIubN49y5t20v+eVv1aq0PSS/gO/e7TP/7et3vNiOm3z+nE2bGDGC7GyGDGHpUpqbvbeiqoq8PLZv7/n3uEcOJ9GbvweIGf1PaDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMfE3CAFF1FZJkwQAAAAASUVORK5CYII=&quot;}]},&quot;content&quot;:&quot;![Image](data:image/png;base64,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)&quot;}}],&quot;usage&quot;:null,&quot;id&quot;:&quot;3e89841d-6ad3-4582-be1e-92b862a21139&quot;,&quot;created&quot;:1707310924,&quot;object&quot;:&quot;chat.completion&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-dial-storage">Using DIAL storage<a href="#using-dial-storage" class="hash-link" aria-label="Direct link to Using DIAL storage" title="Direct link to Using DIAL storage">​</a></h3>
<p>Now with the DIAL storage, the request is the same, but we are
requesting an image URL instead of base64-encoded image data:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">!curl </span><span class="token operator">-</span><span class="token plain">X POST </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;${DIAL_URL}/openai/deployments/${APP_NAME}/chat/completions?api-version=2023-12-01-preview&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">-</span><span class="token plain">H </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Api-Key:dial_api_key&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">-</span><span class="token plain">H </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Content-Type:application/json&quot;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">-</span><span class="token plain">d </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;url,Hello world!&quot;}]}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&quot;choices&quot;:[{&quot;index&quot;:0,&quot;finish_reason&quot;:&quot;stop&quot;,&quot;message&quot;:{&quot;role&quot;:&quot;assistant&quot;,&quot;custom_content&quot;:{&quot;attachments&quot;:[{&quot;index&quot;:0,&quot;type&quot;:&quot;image/png&quot;,&quot;title&quot;:&quot;Image&quot;,&quot;url&quot;:&quot;files/FSWLtFA648cQNf6WfxHZcFzdABKNsTr7ygwQjYbiDi1n/appdata/render-text/images/picture.png&quot;}]},&quot;content&quot;:&quot;![Image](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkCAIAAABM5OhcAAAGHUlEQVR4nO3ZXWhTZxzH8e9psrbaiNham6JFQS2+QDOsbL4N6lYmoiK+i7tQbwrihYoX4o26zgtFtwkrgyobY9NuoAiKgi+1RqlvuImgNxNFC0XxtbMqvrRJdpGDMaenNpX9183+Ppyb8+TJk+ecfGfSzEkkEPnHZfX0BuT9pLDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDExL8dluMwbFinp/9NGW5y2DAcx3wz/xcZhfWWO6u72Zlefmf0USgmFJaYMAlr3z6mTKFfP0Ihpk4lGu3e048eZcYMCgvJzqa4mAULuHjRZ9rYsTgON2+mRn79FcchGOTx49RgbS2OQ01NpusnP/cvXaKsjECAFy/8N7l3r3uN+flUVHD2bPeu8f2XSHR9AEOH+j80dKh3kXXrACZPpqaGb75h9GgCAQ4d8l+q48pffQUwciRbt7JnD19+SThMIMAvv3hfev16gJ07UyNVVQSDAAcPpgbnzwdoasp0fSAcprSUadOoqSEW89nkmjXuNdbW8t13TJpEOMzAgWm3ouOd6VVHZpMyDuvYMYCZM2lvd0daWykuZvBg2tp8lvKcnjqF4xCJ8ORJavD2bcJhcnO5cSPtpc+fB1i0KDVSWsoXX5CdzerV7kg8TkEBH37YjfWTVq7sdJOHDwNUVqauMRZj7lzvf6gKK4NJUFJCS4vPUVKSdvtmzQK4ejXt6Rs2ANTX+7xJntM5cwCOHPFu4PvvAdauTRuMxykuprCQeJxEgtu3Aerq+OQTIhF3zu+/A2zc2I31k+7d63STyWu8cCFthRs3FFbakdmkrryeWVhI//7e+HbvBvj2W583yXM6aBBZWbx86d3AtWsAH3/sHa+qArh8mUSCujqAO3fYsAHH4cEDEgm2bAH4449urA8UFHgv/81NFhURDKb+uXp9hEIKK3UEu64GgKIifvvNZ3zxYu7eTZ22tNDezoABPjOfPev6VR49cr9TewwZ4j7qMXs2O3dSX08kQjTK6NGEw3z6KdXVRKPMm0d9PSUljBvXvfWTiXTm4UMGDiQQ8I7n5/P0adfX2EtkGlZuLhUV/uNvCoWIxzlwwGfm8OFdv0p+Pvfv8+qV971vbnYf9fjsM0IhTpxg7VqiUSorASZMoE8fTp5k5kzOnGH58ndf31ffvjx4QCzmbeuvvzJ6ei/xD//cUFZGayvl5VRUpI5YjGiUtraunz5pEvE4DQ3e8ePHASZP9o7n5DBtGqdP09TEtWtMneoOTpxIQwONjTx/zuzZ776+r0iE9nb3T4fX/vyT1ta0kVu33I/RXiqTz0sy/quwthagujo18uQJo0YRCvHsmc9SntPkL16RCE+fpgbv3CEcJieH69d9NvDzzwArVuA43L/vDm7eDLBsGf36pX2jymT9jhfrGdm1C2D6dPePhkSCtjb3R403b8XXX1Nezv79Pf91p0eOzCZlHFZ7O59/DrBkCT/8wI4djBlDVhZ79rgTcnMJBtm1i5YWn9NEgo0bAUaOZNs26uqornZ/Z/rpJ/8NPHxIIMAHH1BWlho8cwYgEGDhQu/8LtfveLGeTcZi7jVWVvLjj+zYwUcfMX48gwen3Yq8PIDy8p5/j3vkyGxSd34gffWKLVsYM4acHMJhZs2isTH16Lp15OWRm8uVKz6nyePwYaZPp6CAYJCiIubN49y5t20v+eVv1aq0PSS/gO/e7TP/7et3vNiOm3z+nE2bGDGC7GyGDGHpUpqbvbeiqoq8PLZv7/n3uEcOJ9GbvweIGf1PaDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMaGwxITCEhMKS0woLDGhsMSEwhITCktMKCwxobDEhMISEwpLTCgsMfE3CAFF1FZJkwQAAAAASUVORK5CYII=)&quot;}}],&quot;usage&quot;:null,&quot;id&quot;:&quot;1e6d8fc1-b25b-454e-92fa-52557c03e19f&quot;,&quot;created&quot;:1707310928,&quot;object&quot;:&quot;chat.completion&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-python-library-requests">Using Python library Requests<a href="#using-python-library-requests" class="hash-link" aria-label="Direct link to Using Python library Requests" title="Direct link to Using Python library Requests">​</a></h2>
<p>Let’s make an HTTP request using the Python <code>requests</code> library and then
display the generated image.</p>
<p>The arguments are identical to the curl command above.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="non-streaming-mode-using-base64-encoded-image-data">Non-streaming mode using base64-encoded image data<a href="#non-streaming-mode-using-base64-encoded-image-data" class="hash-link" aria-label="Direct link to Non-streaming mode using base64-encoded image data" title="Direct link to Non-streaming mode using base64-encoded image data">​</a></h3>
<p>Let’s call the application in the <strong>non-streaming</strong> mode:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">response </span><span class="token operator">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">post</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">dial_url</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">/openai/deployments/</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">app_name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">/chat/completions?api-version=2023-12-01-preview&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    headers</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Api-Key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dial_api_key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    json</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;messages&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;base64,requests non-stream&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">body </span><span class="token operator">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">message </span><span class="token operator">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;choices&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;message&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">completion </span><span class="token operator">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&quot;Completion: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">completion</span><span class="token string-interpolation interpolation conversion-option punctuation" style="color:rgb(248, 248, 242)">!r</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">assert</span><span class="token plain"> completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startswith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;![Image](data:image/png;base64,&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Unexpected completion&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_data </span><span class="token operator">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;custom_content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;attachments&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;data&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">display_base64_image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">image_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&#x27;choices&#x27;: [{&#x27;index&#x27;: 0,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   &#x27;finish_reason&#x27;: &#x27;stop&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   &#x27;message&#x27;: {&#x27;role&#x27;: &#x27;assistant&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;custom_content&#x27;: {&#x27;attachments&#x27;: [{&#x27;index&#x27;: 0,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       &#x27;type&#x27;: &#x27;image/png&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       &#x27;title&#x27;: &#x27;Image&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       &#x27;data&#x27;: &#x27;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&#x27;}]},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;content&#x27;: &#x27;![Image](data:image/png;base64,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)&#x27;}}],</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &#x27;usage&#x27;: None,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &#x27;id&#x27;: &#x27;2c278f57-f6ac-4cd7-ad10-cc8f7fa42ea0&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &#x27;created&#x27;: 1707310932,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &#x27;object&#x27;: &#x27;chat.completion&#x27;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Completion: &#x27;![Image](data:image/png;base64,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)&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" src="data:image/png;base64,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" width="200" height="100" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="non-streaming-mode-using-dial-storage">Non-streaming mode using DIAL storage<a href="#non-streaming-mode-using-dial-storage" class="hash-link" aria-label="Direct link to Non-streaming mode using DIAL storage" title="Direct link to Non-streaming mode using DIAL storage">​</a></h3>
<p>Now we ask to return URL to the image in DIAL storage. The only
difference is that we need to download the image first and then display
it.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">response </span><span class="token operator">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">post</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">dial_url</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">/openai/deployments/</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">app_name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">/chat/completions?api-version=2023-12-01-preview&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    headers</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Api-Key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dial_api_key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    json</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;messages&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;url,Requests non-stream&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">body </span><span class="token operator">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">message </span><span class="token operator">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;choices&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;message&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">completion </span><span class="token operator">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">assert</span><span class="token plain"> completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startswith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;![Image](data:image/png;base64,&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Unexpected completion&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&#x27;choices&#x27;: [{&#x27;index&#x27;: 0,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   &#x27;finish_reason&#x27;: &#x27;stop&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   &#x27;message&#x27;: {&#x27;role&#x27;: &#x27;assistant&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;custom_content&#x27;: {&#x27;attachments&#x27;: [{&#x27;index&#x27;: 0,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       &#x27;type&#x27;: &#x27;image/png&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       &#x27;title&#x27;: &#x27;Image&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       &#x27;url&#x27;: &#x27;files/FSWLtFA648cQNf6WfxHZcFzdABKNsTr7ygwQjYbiDi1n/appdata/render-text/images/picture.png&#x27;}]},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;content&#x27;: &#x27;![Image](data:image/png;base64,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)&#x27;}}],</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &#x27;usage&#x27;: None,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &#x27;id&#x27;: &#x27;05987e87-3818-41c1-b4fd-c42d6b765926&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &#x27;created&#x27;: 1707310938,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &#x27;object&#x27;: &#x27;chat.completion&#x27;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The application completion contains a Markdown image, which we could
display in the notebook:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Markdown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<figure><img src="data:image/png;base64,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" alt="Image"><figcaption aria-hidden="true">Image</figcaption></figure>
<p>The same image is saved as an image attachment. We download the image
from the DIAL storage first and then display it:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_url </span><span class="token operator">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;custom_content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;attachments&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;url&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_data </span><span class="token operator">=</span><span class="token plain"> download_file_as_base64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dial_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> image_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Api-Key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dial_api_key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">display_base64_image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">image_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" src="data:image/png;base64,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" width="200" height="100" class="img_ev3q"></p>
<p>From now on, we only demonstrate the use cases with DIAL storage.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-mode-using-dial-storage">Streaming mode using DIAL storage<a href="#streaming-mode-using-dial-storage" class="hash-link" aria-label="Direct link to Streaming mode using DIAL storage" title="Direct link to Streaming mode using DIAL storage">​</a></h3>
<p>When <strong>streaming is enabled</strong>, the chat completion returns a sequence of
messages, each containing a chunk of a generated response:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">response </span><span class="token operator">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">post</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">dial_url</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">/openai/deployments/</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">app_name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">/chat/completions?api-version=2023-12-01-preview&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    headers</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Api-Key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dial_api_key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    json</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;messages&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;url,Requests stream&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;stream&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> chunk </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">iter_lines</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chunk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;data: {&quot;choices&quot;:[{&quot;index&quot;:0,&quot;finish_reason&quot;:null,&quot;delta&quot;:{&quot;role&quot;:&quot;assistant&quot;}}],&quot;usage&quot;:null,&quot;id&quot;:&quot;9cae589e-238f-405d-8747-e1f5544ad6dc&quot;,&quot;created&quot;:1707310961,&quot;object&quot;:&quot;chat.completion.chunk&quot;}&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;data: {&quot;choices&quot;:[{&quot;index&quot;:0,&quot;finish_reason&quot;:null,&quot;delta&quot;:{&quot;custom_content&quot;:{&quot;attachments&quot;:[{&quot;index&quot;:0,&quot;type&quot;:&quot;image/png&quot;,&quot;title&quot;:&quot;Image&quot;,&quot;url&quot;:&quot;files/FSWLtFA648cQNf6WfxHZcFzdABKNsTr7ygwQjYbiDi1n/appdata/render-text/images/picture.png&quot;}]}}}],&quot;usage&quot;:null,&quot;id&quot;:&quot;9cae589e-238f-405d-8747-e1f5544ad6dc&quot;,&quot;created&quot;:1707310961,&quot;object&quot;:&quot;chat.completion.chunk&quot;}&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;data: {&quot;choices&quot;:[{&quot;index&quot;:0,&quot;finish_reason&quot;:null,&quot;delta&quot;:{&quot;content&quot;:&quot;![Image](data:image/png;base64,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)&quot;}}],&quot;usage&quot;:null,&quot;id&quot;:&quot;9cae589e-238f-405d-8747-e1f5544ad6dc&quot;,&quot;created&quot;:1707310961,&quot;object&quot;:&quot;chat.completion.chunk&quot;}&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;data: {&quot;choices&quot;:[{&quot;index&quot;:0,&quot;finish_reason&quot;:&quot;stop&quot;,&quot;delta&quot;:{}}],&quot;usage&quot;:null,&quot;id&quot;:&quot;9cae589e-238f-405d-8747-e1f5544ad6dc&quot;,&quot;created&quot;:1707310961,&quot;object&quot;:&quot;chat.completion.chunk&quot;}&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;data: [DONE]&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b&#x27;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-openai-python-sdk">Using OpenAI Python SDK<a href="#using-openai-python-sdk" class="hash-link" aria-label="Direct link to Using OpenAI Python SDK" title="Direct link to Using OpenAI Python SDK">​</a></h2>
<p>The DIAL deployment could be called using <a href="https://pypi.org/project/openai/" target="_blank" rel="noopener noreferrer">OpenAI Python
SDK</a> as well.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openai_client </span><span class="token operator">=</span><span class="token plain"> openai</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">AzureOpenAI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    azure_endpoint</span><span class="token operator">=</span><span class="token plain">dial_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    azure_deployment</span><span class="token operator">=</span><span class="token plain">app_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    api_key</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dial_api_key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    api_version</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2023-12-01-preview&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let’s call the application in the <strong>non-streaming</strong> mode:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chat_completion </span><span class="token operator">=</span><span class="token plain"> openai_client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">chat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">completions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    messages</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;url,OpenAI non-stream&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    model</span><span class="token operator">=</span><span class="token plain">app_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chat_completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">message </span><span class="token operator">=</span><span class="token plain"> chat_completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">choices</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">message</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">completion </span><span class="token operator">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">content</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">assert</span><span class="token plain"> completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startswith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;![Image](data:image/png;base64,&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Unexpected completion&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ChatCompletion(id=&#x27;a029ad1c-ad4d-40e3-b293-6252f73dc079&#x27;, choices=[Choice(finish_reason=&#x27;stop&#x27;, index=0, logprobs=None, message=ChatCompletionMessage(content=&#x27;![Image](data:image/png;base64,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)&#x27;, role=&#x27;assistant&#x27;, function_call=None, tool_calls=None, custom_content={&#x27;attachments&#x27;: [{&#x27;index&#x27;: 0, &#x27;type&#x27;: &#x27;image/png&#x27;, &#x27;title&#x27;: &#x27;Image&#x27;, &#x27;url&#x27;: &#x27;files/FSWLtFA648cQNf6WfxHZcFzdABKNsTr7ygwQjYbiDi1n/appdata/render-text/images/picture.png&#x27;}]}))], created=1707310972, model=None, object=&#x27;chat.completion&#x27;, system_fingerprint=None, usage=None)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The application completion contains a Markdown image, which we could
display in the notebook:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Markdown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<figure><img src="data:image/png;base64,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" alt="Image"><figcaption aria-hidden="true">Image</figcaption></figure>
<p>The same image is saved as an image attachment. We download the image
from the DIAL storage first and then display it:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_url </span><span class="token operator">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">custom_content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;attachments&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;url&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image_data </span><span class="token operator">=</span><span class="token plain"> download_file_as_base64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dial_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> image_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Api-Key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dial_api_key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">display_base64_image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">image_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" src="data:image/png;base64,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" width="200" height="100" class="img_ev3q"></p>
<p>Let’s call the application in the <strong>streaming</strong> mode:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">chat_completion </span><span class="token operator">=</span><span class="token plain"> openai_client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">chat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">completions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    messages</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;url,OpenAI stream&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stream</span><span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    model</span><span class="token operator">=</span><span class="token plain">app_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">completion </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> chunk </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> chat_completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chunk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    content </span><span class="token operator">=</span><span class="token plain"> chunk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">choices</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">delta</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">content</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        completion </span><span class="token operator">+=</span><span class="token plain"> content</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">assert</span><span class="token plain"> completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startswith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;![Image](data:image/png;base64,&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Unexpected completion&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Markdown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ChatCompletionChunk(id=&#x27;6b6dd28f-4074-4dfe-bf31-9f51540bdd70&#x27;, choices=[Choice(delta=ChoiceDelta(content=None, function_call=None, role=&#x27;assistant&#x27;, tool_calls=None), finish_reason=None, index=0, logprobs=None)], created=1707310983, model=None, object=&#x27;chat.completion.chunk&#x27;, system_fingerprint=None, usage=None)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ChatCompletionChunk(id=&#x27;6b6dd28f-4074-4dfe-bf31-9f51540bdd70&#x27;, choices=[Choice(delta=ChoiceDelta(content=None, function_call=None, role=None, tool_calls=None, custom_content={&#x27;attachments&#x27;: [{&#x27;index&#x27;: 0, &#x27;type&#x27;: &#x27;image/png&#x27;, &#x27;title&#x27;: &#x27;Image&#x27;, &#x27;url&#x27;: &#x27;files/FSWLtFA648cQNf6WfxHZcFzdABKNsTr7ygwQjYbiDi1n/appdata/render-text/images/picture.png&#x27;}]}), finish_reason=None, index=0, logprobs=None)], created=1707310983, model=None, object=&#x27;chat.completion.chunk&#x27;, system_fingerprint=None, usage=None)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ChatCompletionChunk(id=&#x27;6b6dd28f-4074-4dfe-bf31-9f51540bdd70&#x27;, choices=[Choice(delta=ChoiceDelta(content=&#x27;![Image](data:image/png;base64,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)&#x27;, function_call=None, role=None, tool_calls=None), finish_reason=None, index=0, logprobs=None)], created=1707310983, model=None, object=&#x27;chat.completion.chunk&#x27;, system_fingerprint=None, usage=None)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ChatCompletionChunk(id=&#x27;6b6dd28f-4074-4dfe-bf31-9f51540bdd70&#x27;, choices=[Choice(delta=ChoiceDelta(content=None, function_call=None, role=None, tool_calls=None), finish_reason=&#x27;stop&#x27;, index=0, logprobs=None)], created=1707310983, model=None, object=&#x27;chat.completion.chunk&#x27;, system_fingerprint=None, usage=None)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<figure><img src="data:image/png;base64,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" alt="Image"><figcaption aria-hidden="true">Image</figcaption></figure>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-langchain">Using LangChain<a href="#using-langchain" class="hash-link" aria-label="Direct link to Using LangChain" title="Direct link to Using LangChain">​</a></h2>
<p>The <a href="https://pypi.org/project/langchain-openai/" target="_blank" rel="noopener noreferrer">LangChain</a> library <strong>is
not suitable</strong> as a client of text-to-image applications, since
<code>langchain-openai&lt;=0.0.2</code> ignores the additional fields attached to the
response message.</p>
<p>Meaning that the response won’t contain any image attachments. It’s
still possible to use the application completion if an application
returns image that way:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> langchain_core</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">messages </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> HumanMessage</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">llm </span><span class="token operator">=</span><span class="token plain"> langchain_openai</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">AzureChatOpenAI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    azure_endpoint</span><span class="token operator">=</span><span class="token plain">dial_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    azure_deployment</span><span class="token operator">=</span><span class="token plain">app_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    api_key</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dial_api_key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    api_version</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2023-12-01-preview&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let’s call the application in the <strong>non-streaming</strong> mode:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">output </span><span class="token operator">=</span><span class="token plain"> llm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">generate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">messages</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">HumanMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">content</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;url,LangChain non-stream&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">output</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">completion </span><span class="token operator">=</span><span class="token plain"> output</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">generations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">text</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&quot;Completion: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">completion</span><span class="token string-interpolation interpolation conversion-option punctuation" style="color:rgb(248, 248, 242)">!r</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">assert</span><span class="token plain"> completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startswith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;![Image](data:image/png;base64,&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Unexpected completion&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Markdown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">generations=[[ChatGeneration(text=&#x27;![Image](data:image/png;base64,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)&#x27;, generation_info={&#x27;finish_reason&#x27;: &#x27;stop&#x27;, &#x27;logprobs&#x27;: None}, message=AIMessage(content=&#x27;![Image](data:image/png;base64,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)&#x27;))]] llm_output={&#x27;token_usage&#x27;: {}, &#x27;model_name&#x27;: &#x27;gpt-3.5-turbo&#x27;} run=[RunInfo(run_id=UUID(&#x27;d533d005-95f2-4c24-a45d-be90e7f67e58&#x27;))]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Completion: &#x27;![Image](data:image/png;base64,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)&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<figure><img src="data:image/png;base64,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" alt="Image"><figcaption aria-hidden="true">Image</figcaption></figure>
<p>Let’s call the application in the <strong>streaming</strong> mode:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">output </span><span class="token operator">=</span><span class="token plain"> llm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">HumanMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">content</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;url,LangChain stream&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">completion </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> chunk </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> output</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chunk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token builtin" style="color:rgb(189, 147, 249)">dict</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    completion </span><span class="token operator">+=</span><span class="token plain"> chunk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">content</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">assert</span><span class="token plain"> completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startswith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;![Image](data:image/png;base64,&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Unexpected completion&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Markdown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">completion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&#x27;content&#x27;: &#x27;&#x27;, &#x27;additional_kwargs&#x27;: {}, &#x27;type&#x27;: &#x27;AIMessageChunk&#x27;, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&#x27;content&#x27;: &#x27;&#x27;, &#x27;additional_kwargs&#x27;: {}, &#x27;type&#x27;: &#x27;AIMessageChunk&#x27;, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&#x27;content&#x27;: &#x27;![Image](data:image/png;base64,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)&#x27;, &#x27;additional_kwargs&#x27;: {}, &#x27;type&#x27;: &#x27;AIMessageChunk&#x27;, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&#x27;content&#x27;: &#x27;&#x27;, &#x27;additional_kwargs&#x27;: {}, &#x27;type&#x27;: &#x27;AIMessageChunk&#x27;, &#x27;example&#x27;: False}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<figure><img src="data:image/png;base64,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" alt="Image"><figcaption aria-hidden="true">Image</figcaption></figure></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cookbook/dial-cookbook/examples/how_to_call_text_to_text_applications"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How to call text-to-text DIAL applications</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cookbook/dial-cookbook/examples/how_to_call_image_to_text_applications"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to call image-to-text DIAL applications</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#dial-attachments" class="table-of-contents__link toc-highlight">DIAL attachments</a></li><li><a href="#downloading-file-from-the-dial-file-storage" class="table-of-contents__link toc-highlight">Downloading file from the DIAL file storage</a></li><li><a href="#using-curl" class="table-of-contents__link toc-highlight">Using Curl</a><ul><li><a href="#using-base64-encoded-image-data" class="table-of-contents__link toc-highlight">Using base64-encoded image data</a></li><li><a href="#using-dial-storage" class="table-of-contents__link toc-highlight">Using DIAL storage</a></li></ul></li><li><a href="#using-python-library-requests" class="table-of-contents__link toc-highlight">Using Python library Requests</a><ul><li><a href="#non-streaming-mode-using-base64-encoded-image-data" class="table-of-contents__link toc-highlight">Non-streaming mode using base64-encoded image data</a></li><li><a href="#non-streaming-mode-using-dial-storage" class="table-of-contents__link toc-highlight">Non-streaming mode using DIAL storage</a></li><li><a href="#streaming-mode-using-dial-storage" class="table-of-contents__link toc-highlight">Streaming mode using DIAL storage</a></li></ul></li><li><a href="#using-openai-python-sdk" class="table-of-contents__link toc-highlight">Using OpenAI Python SDK</a></li><li><a href="#using-langchain" class="table-of-contents__link toc-highlight">Using LangChain</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 EPAM Systems, Inc. All Rights Reserved</div></div></div></footer></div>
</body>
</html>