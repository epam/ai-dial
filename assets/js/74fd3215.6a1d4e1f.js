"use strict";(self.webpackChunkdial=self.webpackChunkdial||[]).push([[9460],{7454:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var i=t(5893),s=t(1151);const a={},r="Using Databricks Models in AI DIAL",o={id:"tutorials/use-databricks-model",title:"Using Databricks Models in AI DIAL",description:"From this document you can learn how to use Databricks models in AI DIAL.",source:"@site/docs/tutorials/use-databricks-model.md",sourceDirName:"tutorials",slug:"/tutorials/use-databricks-model",permalink:"/tutorials/use-databricks-model",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"CustomSideBar",previous:{title:"Custom Buttons in Apps",permalink:"/tutorials/custom-buttons"},next:{title:"Chat User Guide",permalink:"/user-guide"}},d={},c=[{value:"Configure Databricks",id:"configure-databricks",level:2},{value:"Step 1 (Optional): Create Serving Endpoint",id:"step-1-optional-create-serving-endpoint",level:3},{value:"Step 2: Create Access Token",id:"step-2-create-access-token",level:3},{value:"Configure AI DIAL",id:"configure-ai-dial",level:2},{value:"Step 3: Configure AI DIAL Model",id:"step-3-configure-ai-dial-model",level:3},{value:"Step 4: Configure OpenAI Adapter",id:"step-4-configure-openai-adapter",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"using-databricks-models-in-ai-dial",children:"Using Databricks Models in AI DIAL"}),"\n",(0,i.jsx)(n.p,{children:"From this document you can learn how to use Databricks models in AI DIAL."}),"\n",(0,i.jsx)(n.h2,{id:"configure-databricks",children:"Configure Databricks"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-optional-create-serving-endpoint",children:"Step 1 (Optional): Create Serving Endpoint"}),"\n",(0,i.jsx)(n.p,{children:"Create a serving endpoint for a Databricks model unless you already have one:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.strong,{children:"Machine Learning"})," section, navigate to the  ",(0,i.jsx)(n.strong,{children:"Serving"})," tab and click ",(0,i.jsx)(n.strong,{children:"Create serving endpoint"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(6569).Z+"",width:"1906",height:"881"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Enter a serving endpoint name (it will be used in the ",(0,i.jsx)(n.a,{href:"#step-4-configure-openai-adapter",children:"Step 4"}),") and select the served Entity (model)."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(514).Z+"",width:"1718",height:"895"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"Create"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-create-access-token",children:"Step 2: Create Access Token"}),"\n",(0,i.jsxs)(n.p,{children:["To generate access token, navigate to the ",(0,i.jsx)(n.strong,{children:"Developer"})," section in your ",(0,i.jsx)(n.strong,{children:"User Settings"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(8833).Z+"",width:"1709",height:"371"})}),"\n",(0,i.jsx)(n.h2,{id:"configure-ai-dial",children:"Configure AI DIAL"}),"\n",(0,i.jsx)(n.h3,{id:"step-3-configure-ai-dial-model",children:"Step 3: Configure AI DIAL Model"}),"\n",(0,i.jsxs)(n.p,{children:["Use the serving endpoint and the access token you have created in two previous steps to add the following configuration in the ",(0,i.jsx)(n.a,{href:"https://github.com/epam/ai-dial-core?tab=readme-ov-file#dynamic-settings",children:"DIAL Core dynamic settings"})," to the ",(0,i.jsx)(n.code,{children:"model"})," section:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"{dial-deployment-name}": \n{\n    "type": "chat",\n    "displayName": "{Deployment name}",\n    "endpoint": "http://{open-ai-adapter-host}/openai/deployments/{databricks-deployment-name}/chat/completions",\n    "upstreams": [\n        {\n            "endpoint": "{databricks-account-address}/serving-endpoints/chat/completions",\n            "key": "access token"\n        }\n    ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-4-configure-openai-adapter",children:"Step 4: Configure OpenAI Adapter"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Since Databricks serving endpoints utilize an authorization flow that differs from OpenAI's, it's necessary to specify the Databricks deployments in the OpenAI Adapter environment variable: ",(0,i.jsx)(n.code,{children:"DATABRICKS_DEPLOYMENTS=databricks-deployment-name"}),". Refer to ",(0,i.jsx)(n.a,{href:"https://github.com/epam/ai-dial-adapter-openai?tab=readme-ov-file#categories-of-deployments",children:"AI DIAL OpenAI adapter documentation"})," for details."]}),"\n",(0,i.jsx)(n.li,{children:"Restart AI DIAL OpenAI Adapter for changes to apply."}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},6569:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/databricks1-f149c9981c73cc878810942155b7804a.png"},514:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/databricks2-87b8d75e33ee23e4a733b851ad7c8c92.png"},8833:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/databricks4-524e9ef13edbb50648321d430340bc32.png"},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>r});var i=t(7294);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);