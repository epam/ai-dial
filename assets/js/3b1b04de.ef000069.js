"use strict";(self.webpackChunkdial=self.webpackChunkdial||[]).push([[6500],{3318:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var i=s(85893),t=s(11151);const o={},r="Roles and Access Control for API Keys",a={id:"tutorials/devops/auth-and-access-control/api-key-roles",title:"Roles and Access Control for API Keys",description:"Introduction",source:"@site/docs/tutorials/2.devops/2.auth-and-access-control/1.api-key-roles.md",sourceDirName:"tutorials/2.devops/2.auth-and-access-control",slug:"/tutorials/devops/auth-and-access-control/api-key-roles",permalink:"/tutorials/devops/auth-and-access-control/api-key-roles",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"CustomSideBar",previous:{title:"Programmatic Auth",permalink:"/tutorials/devops/auth-and-access-control/programmatic-auth"},next:{title:"Roles and Access Control for JWT",permalink:"/tutorials/devops/auth-and-access-control/chat-users-roles"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Step 1: Create API Key",id:"step-1-create-api-key",level:2},{value:"Step 2: Assign Roles (Required)",id:"step-2-assign-roles-required",level:2},{value:"Step 3: Configure Access and Restrictions",id:"step-3-configure-access-and-restrictions",level:2},{value:"Usage Limits",id:"usage-limits",level:3},{value:"Token Limit",id:"token-limit",level:4},{value:"Example",id:"example",level:5},{value:"Cost Limit",id:"cost-limit",level:4},{value:"Example",id:"example-1",level:5},{value:"Sharing Limits",id:"sharing-limits",level:3},{value:"Example",id:"example-2",level:5},{value:"Example",id:"example-3",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"roles-and-access-control-for-api-keys",children:"Roles and Access Control for API Keys"}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(n.p,{children:["API keys can be used not only for ",(0,i.jsx)(n.a,{href:"/platform/core/auth-intro",children:"authentication"}),", but also to manage access to system resources and apply restrictions on such access. This is done via assigning of ",(0,i.jsx)(n.strong,{children:"roles"})," to API keys. Roles must be associated with specific system resources such as models and applications."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Refer to ",(0,i.jsx)(n.a,{href:"/platform/core/access-control-intro#api-keys",children:"API Keys"})," to learn more."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-1-create-api-key",children:"Step 1: Create API Key"}),"\n",(0,i.jsxs)(n.p,{children:["You can define API keys in ",(0,i.jsx)(n.a,{href:"https://github.com/epam/ai-dial-core/blob/development/docs/dynamic-settings/keys.md",children:"DIAL Core dynamic settings"})," in the ",(0,i.jsx)(n.code,{children:"keys"})," section."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Refer to ",(0,i.jsx)(n.a,{href:"/tutorials/devops/auth-and-access-control/programmatic-auth#step-1-define-api-keys",children:"Create API Key"})," to see details."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-2-assign-roles-required",children:"Step 2: Assign Roles (Required)"}),"\n",(0,i.jsxs)(n.p,{children:["You can define roles in ",(0,i.jsx)(n.a,{href:"https://github.com/epam/ai-dial-core/blob/development/docs/dynamic-settings/roles.md",children:"DIAL Core dynamic settings"})," in the ",(0,i.jsx)(n.code,{children:"roles"})," section."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Refer to ",(0,i.jsx)(n.a,{href:"/tutorials/devops/auth-and-access-control/programmatic-auth#step-2-assign-roles-required",children:"Assign role(s)"})," to see details."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-3-configure-access-and-restrictions",children:"Step 3: Configure Access and Restrictions"}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.code,{children:"roles"})," section of the DIAL Core dynamic settings, you can include token usage, cost and also sharing limits for roles."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": If limits are not configured the ",(0,i.jsx)(n.strong,{children:"access is unlimited"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"usage-limits",children:"Usage Limits"}),"\n",(0,i.jsx)(n.p,{children:"You can configure token usage and cost limits for roles."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Refer to ",(0,i.jsx)(n.a,{href:"/platform/core/token-limits-and-cost-control",children:"Token Limits and Cost Control"})," to learn more about these mechanisms."]}),"\n",(0,i.jsxs)(n.li,{children:["Refer to ",(0,i.jsx)(n.a,{href:"https://github.com/epam/ai-dial-core/blob/development/docs/dynamic-settings/roles.md",children:"DIAL Core"})," to learn how to configure roles."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"token-limit",children:"Token Limit"}),"\n",(0,i.jsx)(n.p,{children:"Token rate limiting controls the volume of tokens processed by AI models within specific timeframes. The system tracks both input and output tokens, enforcing limits across minute, daily, weekly, or monthly intervals. When a limit is reached, additional requests are rejected until the time window refreshes."}),"\n",(0,i.jsx)(n.p,{children:"Token limits are defined as the number of tokens for the following timeframes: minute, day, week, month."}),"\n",(0,i.jsx)(n.h5,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(n.p,{children:["In this example, we define the ",(0,i.jsx)(n.code,{children:"basic"})," role with daily token usage limits for the ",(0,i.jsx)(n.code,{children:"chat-gpt-35-turbo"})," model ."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"roles": {\n    "basic": {\n        "limits": {\n            "chat-gpt-35-turbo": {\n                "day": "10000000"\n            }\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"cost-limit",children:"Cost Limit"}),"\n",(0,i.jsxs)(n.p,{children:["Cost-based rate limiting addresses financial governance by setting ",(0,i.jsx)(n.strong,{children:"monetary"})," consumption limits across all models available to a specific role. Unlike token limits, which vary in financial impact depending on the model used, cost limits directly control actual spending. Both cost and rate limits operate in parallel, with requests needing to satisfy all applicable limits. When rejected, users receive notifications explaining which specific constraint was triggered."]}),"\n",(0,i.jsx)(n.p,{children:"Cost limits are defined in USD for the following timeframes: minute, day, week, month."}),"\n",(0,i.jsx)(n.h5,{id:"example-1",children:"Example"}),"\n",(0,i.jsxs)(n.p,{children:["In this example, we define the ",(0,i.jsx)(n.code,{children:"operator"})," role with daily cost limits 100 USD for all models and token usage daily limits 10000000 tokens for the ",(0,i.jsx)(n.code,{children:"chat-gpt-35-turbo"})," model ."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"roles": {\n    "operator": {\n        "limits": {\n            "chat-gpt-35-turbo": {\n                "day": "10000000",\n            }\n        },\n        "costLimit": {\n            "day": 100.00,\n        },\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sharing-limits",children:"Sharing Limits"}),"\n",(0,i.jsxs)(n.p,{children:["In DIAL, you can share your private resources with other users or applications. A shared resource becomes available for a recipient(s) in DIAL Chat, DIAL Marketplace and via API. Refer to ",(0,i.jsx)(n.a,{href:"/platform/collaboration-intro#sharing",children:"Sharing"})," to learn more."]}),"\n",(0,i.jsx)(n.p,{children:"You can configure sharing limits for roles to restrict the maximum number of users who can accept an invitation link for a resource (APPLICATION or FILE) being shared."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"invitation_ttl"}),": TTL of the invitation link. Default: 72 (hrs)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"max_accepted_users"}),": The maximum number of users who can accept an invitation link for a resource being shared. The limit is applied to the shared resource. Default: 10 for APPLICATION and UNLIMITED for other resource types."]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"example-2",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"roles": {\n    "basic": { // the name of the role\n        "share": {\n            "APPLICATION": {\n                "invitation_ttl": "24",\n                "max_accepted_users": "10"\n                },\n            "FILE": {\n                "invitation_ttl": "24",\n                "max_accepted_users": "10"\n                }\n            }\n        }\n    }\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-3",children:"Example"}),"\n",(0,i.jsxs)(n.p,{children:["In the following example, we define the ",(0,i.jsx)(n.code,{children:"basic"})," role with token usage and cost limits for the ",(0,i.jsx)(n.code,{children:"chat-gpt-35-turbo"})," model and sharing limits for applications and files."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Refer to ",(0,i.jsx)(n.a,{href:"https://github.com/epam/ai-dial-core/blob/development/docs/dynamic-settings/roles.md",children:"dynamic settings"})," to see other configuration options for roles."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'//Example extract from aidial.config.json\n"keys": {\n    "proxyKey1": { //API key\n        "project": "Project1",\n        "role": "basic" // the name of the role\n    }\n},\n"roles": {\n    "basic": {\n        "limits": {\n            "chat-gpt-35-turbo": {\n                "minute": "100000", //number of tokens per minute\n                "day": "10000000",\n                "week": "10000000",\n                "month": "10000000"\n            }\n        },\n        "costLimit": {\n            "minute": 10.00, //cost per minute in USD\n            "day": 100.00,\n            "week": 500.00,\n            "month": 2000.00\n        },\n        "share": {\n            "APPLICATION": {\n                "invitation_ttl": "24",\n                "max_accepted_users": "10"\n            },\n            "FILE": {\n                "invitation_ttl": "24",\n                "max_accepted_users": "10"\n            }\n        }\n    }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>r});var i=s(67294);const t={},o=i.createContext(t);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);