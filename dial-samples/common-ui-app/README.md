
# AI DIAL Custom App UI

## Overview

This project is a sample UI project for a custom DIAL application built using [Next.js](https://nextjs.org/), a React framework with server-rendering capabilities. It can be easily customized and adapted to your needs by following the steps mentioned below.

The projects includes two applications:
* **Admin** - an application that is intended for managing application settings. For demo purposes it has only one numeric field called `Count`.
* **Client** - an application that shows a simple example of how a custom end-user interface for a DIAL application can be implemented. For demo purposes it has only one read-only numeric field called `Count`, whose value is retrieved from the same configuration source that is used by the Admin application.

## Set Up Developer Environment

This project is managed by [NX](https://nx.dev/).

Before diving into the development environment, install Node.js (version >=20) and yarn (version >=1) on your system. If you don't already have them, follow the [instruction](https://nodejs.org/en/download/).

Once you have Node.js and yarn installed, follow these steps to set up your developer environment:

1. Clone the AI DIAL Custom App UI repository:

   ```bash
   git clone 
   ```

2. Install project dependencies:

   ```bash
   yarn
   ```

   or

   ```bash
   yarn install
   ```

3. Create `.env.local` file in the `\apps\dial-custom-ui-client` or `\apps\dial-custom-ui-client` project directory and add the required variables with appropriate values. These two are the only required environment variables.

   ```bash
   API_URL="ADD_VALUE_HERE"
   DIAL_URL="ADD_VALUE_HERE"
   DIAL_APPLICATION_NAME="ADD_VALUE_HERE"
   ```

4. To start the development server, run:
  For client app
   ```bash
   yarn start:client
   ```

   Once the server is up and running, open `http://localhost:5500` in your browser to view the AI DIAL Custom App UI Client
   For Admin app
   ```bash
   yarn start:admin
   ```

   Once the server is up and running, open `http://localhost:5600` in your browser to view the AI DIAL Custom App UI Admin

## Build

To create an optimized build of your application, run the following command:

```bash
yarn build 
```

After running the command, you will see a `.dist` folder created in your project directory with the optimized output.

## Test

To run the unit tests suite for your application, execute the following command:

```bash
yarn test
```

## Environment Variables

AI DIAL Custom App UI uses environment variables for configuration.

### Environment variables for the configuration of AI DIAL Custom App UI

All environment variables that can be used to configure settings and behavior of the AI DIAL Custom App UI are included in the `.env` file of `apps/dial-custom-ui-admin` or `apps/dial-custom-ui-client` folder

| Variable                | Required | Description                                                                                      | Available Values | Default values |
| ----------------------- | :------: | ------------------------------------------------------------------------------------------------ | ---------------- | -------------- |
| `API_URL`               |   Yes    | Dial Core URL. Used to proxy to Custom Application Backend API.                                     | Any string       |                |
| `DIAL_URL`         |   Yes    | The host URL for a dial chat.                                                                    | Any string       |                |
| `DIAL_APPLICATION_NAME` |   Yes    | Should match name in dial config ("dial:applicationTypeDisplayName" from applicationTypeSchemas) | Any string       |                |
| `THEMES_CONFIG_URL`     |    No    | The host URL for a custom themes configuration.<br />Can lead to public and private resource.    | Any string       |                |

### Environment Variables for the Configuration of Auth Providers

The table below presents a list of environment variables you can use to configure a specific IDP provider.

| Variable                         | Required | Description                                                                                                                                                                                                                                        | Available Values                                 | Default values                                  |
| -------------------------------- | :------: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ | ----------------------------------------------- |
| `NEXTAUTH_URL`                   |    No    | Host URL for the NextAuth. If not set, auth is disabled                                                                                                                                                                                            | Any string                                       |                                                 |
| `NEXTAUTH_SECRET`                |   Yes    | Used to encrypt the NextAuth.js JWT (you can generate it with `npx auth secret`)                                                                                                                                                                   | Any string                                       |                                                 |
| `AUTH_AZURE_AD_CLIENT_ID`         |                                                               No                                                               | A unique identifier for the client application registered in Azure Active Directory (AD). It is used to authenticate the client application when accessing Azure AD resources.                                                                                                                                                                                                                                                                                                                                | Any string                                                                                                                      |                                                 |
| `AUTH_AZURE_AD_NAME`              |                                                               No                                                               | A name of the Azure AD tenant. It is used to specify the specific Azure AD instance to authenticate against.                                                                                                                                                                                                                                                                                                                                                                                                  | Any string                                                                                                                      |                                                 |
| `AUTH_AZURE_AD_SECRET`            |                                                               No                                                               | Also known as the client secret or application secret, this parameter is a confidential string that authenticates and authorizes the client application to access Azure AD resources. It serves as a password for the client application.                                                                                                                                                                                                                                                                     | Any string                                                                                                                      |                                                 |
| `AUTH_AZURE_AD_TENANT_ID`         |                                                               No                                                               | Tenant ID refers to a globally unique identifier (GUID) that represents a specific Azure AD tenant. It is used to identify and authenticate the Azure AD tenant that the client application belongs to.                                                                                                                                                                                                                                                                                                       | Any string                                                                                                                      |                                                 |
| `AUTH_AZURE_AD_SCOPE`             |                                                               No                                                               | This parameter specifies the level of access and permissions that the client application requests when making a request to Azure AD resources. It defines the resources and actions that the application can access on behalf of a user or itself.                                                                                                                                                                                                                                                            | Any string                                                                                                                      | `openid profile user.Read email offline_access` |                                          |
| `AUTH_GOOGLE_CLIENT_ID`           |                                                               No                                                               | Google Client ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Any string                                                                                                                      |                                                 |
| `AUTH_GOOGLE_NAME`                |                                                               No                                                               | Google Name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Any string                                                                                                                      |                                                 |
| `AUTH_GOOGLE_SECRET`              |                                                               No                                                               | Google Secret                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Any string                                                                                                                      |                                                 |
| `AUTH_GOOGLE_SCOPE`               |                                                               No                                                               | Google Scope                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Any string                                                                                                                      | `openid email profile offline_access`           |
| `AUTH_KEYCLOAK_CLIENT_ID`         |                                                               No                                                               | Keycloak Client ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Any string                                                                                                                      |                                                 |
| `AUTH_KEYCLOAK_HOST`              |                                                               No                                                               | Keycloak Host                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Any string                                                                                                                      |                                                 |
| `AUTH_KEYCLOAK_NAME`              |                                                               No                                                               | Keycloak Name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Any string                                                                                                                      |                                                 |
| `AUTH_KEYCLOAK_SECRET`            |                                                               No                                                               | Keycloak Secret                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Any string                                                                                                                      |                                                 |
| `AUTH_KEYCLOAK_SCOPE`             |                                                               No                                                               | Keycloak Scope                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Any string                                                                                                                      | `openid email profile offline_access`           |
| `AUTH_COGNITO_CLIENT_ID`          |                                                               No                                                               | Cognito Client ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Any string                                                                                                                      |                                                 |
| `AUTH_COGNITO_HOST`               |                                                               No                                                               | Cognito Host                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Any string                                                                                                                      |                                                 |
| `AUTH_COGNITO_NAME`               |                                                               No                                                               | Cognito Name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Any string                                                                                                                      |                                                 |
| `AUTH_COGNITO_SECRET`             |                                                               No                                                               | Cognito Secret                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Any string                                                                                                                      |                                                 |
| `AUTH_COGNITO_SCOPE`              |                                                               No                                                               | Cognito Scope                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Any string                                                                                                                      | `openid email profile`                          |
| `AUTH_OKTA_CLIENT_ID`             |                                                               No                                                               | Okta Client ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Any string                                                                                                                      |                                                 |
| `AUTH_OKTA_CLIENT_SECRET`         |                                                               No                                                               | Okta Client Secret                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Any string                                                                                                                      |                                                 |
| `AUTH_OKTA_ISSUER`                |                                                               No                                                               | Okta domain issuer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Any string                                                                                                                      |                                                 |
| `AUTH_OKTA_SCOPE`                 |                                                               No                                                               | Okta Scope                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Any string                                                                                                                      | `openid email profile`                          |
