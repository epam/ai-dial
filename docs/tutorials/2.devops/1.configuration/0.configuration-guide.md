<!-- omit from toc -->
# Configuration

> **Important**: it is assumed that you have a working knowledge of standard Helm chart parameters in order to define them within the configuration file.

This instruction assumes that you are installing and configuring applications using the latest official [AI DIAL Helm Chart](https://charts.dialx.ai/).

<div class="docusaurus-ignore">

<!-- omit from toc -->
# Table of Contents
- [General method of configuration](#general-method-of-configuration)
- [Core Parameters](#core-parameters)
  - [Static settings](#static-settings)
  - [Dynamic settings](#dynamic-settings)
- [Chat Parameters](#chat-parameters)
- [Themes Parameters](#themes-parameters)
- [Adapters Parameters](#adapters-parameters)
- [Auth Helper Parameters](#auth-helper-parameters)

</div>

## General method of configuration

DIAL helm chart contains various applications, and, to configure them, it is necessary to make corresponding changes to different sections of the **values** file.

To add environment variables to a DIAL application, you can use either `env` or `secrets` section in specific components, e.g `core.env`, `openai.secrets`

> Refer to the [helm chart repository](https://github.com/epam/ai-dial-helm/tree/main/charts/dial/examples) to view selected configuration examples.

### Enabling Support for Private Certificate Authority or Self-Signed Certificate

Java-based and NodeJS-based DIAL components require different configurations to support private CA or self-signed certificates.

#### NodeJS-based components 

For DIAL frontend components such as [DIAL Chat](https://github.com/epam/ai-dial-chat/blob/development/apps/chat/README.md) or [DIAL Admin frontend](https://github.com/epam/ai-dial-admin-frontend), set the `NODE_TLS_REJECT_UNAUTHORIZED` environment variable to allow connections to servers with self-signed or private CA certificates:

```bash
NODE_TLS_REJECT_UNAUTHORIZED: 0
```
> **Warning**: Setting `NODE_TLS_REJECT_UNAUTHORIZED=0` disables certificate validation for all outgoing HTTPS requests. Use this setting only in trusted environments, such as development or testing, as it introduces security risks in production.

#### Java-based components

This configuration applies to Java-based components such as [DIAL Core](https://github.com/epam/ai-dial-core), [DIAL Admin backend](https://github.com/epam/ai-dial-admin-backend), or any component using the `eclipse-temurin` Docker image as a base. This image includes a script to enable the use of self-signed or private CA certificates.

To enable support for self-signed or private CA certificates:

* Set the `USE_SYSTEM_CA_CERTS` environment variable to `true`.
* Mount your private certificate(s) into the `/certificates` directory inside the container.

Example Docker Compose configuration for DIAL Admin backend:

```bash
admin-backend:
  image: ghcr.io/epam/ai-dial-admin-backend:latest
  environment:
    [redacted]
    USE_SYSTEM_CA_CERTS: true
  volumes:
    /opt/ssl/YOUR_NON_PUBLIC_CERTIFICATE.crt:/certificates/YOUR_NON_PUBLIC_CERTIFICATE.crt
```

> **Note**: Replace `YOUR_NON_PUBLIC_CERTIFICATE.crt` with the actual filename of your certificate. Ensure that the certificate file(s) you mount are in PEM (Privacy Enhanced Mail) format (`.crt`). Multiple certificates can be mounted if needed.

## Core Parameters

> Refer to the [AI DIAL Core](https://github.com/epam/ai-dial-core) to view a complete documentation.

Configure AI DIAL Core parameters in the `core` section of the values file.

You can provide **dynamic** and **static** settings for the AI DIAL Core:

### Static settings

> Refer to [static settings](https://github.com/epam/ai-dial-core#static-settings) in the AI DIAL Core repository to learn more.

Static settings are used on startup and **cannot** be changed while application is running. You can modify static settings in two ways:

- via environment variables
  - add a parameter to an environment variable with the prefix **aidial.**, e.g.  `aidial.server.port`
- by overriding the default configuration file
  - set the environment variable **AIDIAL_SETTINGS** with a full path to the config file
  - mount the configuration file at the above path

### Dynamic settings

Dynamic settings are stored in JSON files, specified via `config.files` static setting, and reloaded at interval, specified via `config.reload` static setting.

> Refer to [dynamic settings](https://github.com/epam/ai-dial-core#dynamic-settings) in the AI DIAL Core repository to learn more.

To modify dynamic settings:

1. add the environment variable **aidial.config.files**, e.g. `aidial.config.files: '["/mnt/secrets-store/aidial.config.json"]'`
2. mount the configuration file at the provided path

## Chat Parameters

> Refer to the [AI DIAL Chat](https://github.com/epam/ai-dial-chat) to view a complete documentation.

Configure [chat parameters](https://github.com/epam/ai-dial-chat/tree/development/apps/chat#environment-variables) in the `chat` section of the values file.

You can modify chat settings using environment variables.

## Themes Parameters

> Refer to the [AI DIAL Chat Themes](https://github.com/epam/ai-dial-chat-themes) to view a complete documentation.

Configure Themes parameters in the `themes` section of the values file.

This component is designed for customizing AI DIAL Chat themes and images, as well as hosting the necessary static files for other AI DIAL applications. To apply any changes, we recommend building your own Docker image based on this component.

## Adapters Parameters

> * Refer to the [Adapter for Bedrock](https://github.com/epam/ai-dial-adapter-bedrock) to view a complete documentation.
> * Refer to the [Adapter for Vertex](https://github.com/epam/ai-dial-adapter-vertexai) to view a complete documentation.
> * Refer to the [Adapter for OpenAI](https://github.com/epam/ai-dial-adapter-openai) to view a complete documentation.

To work with Azure, AWS or GCP models, AI DIAL uses applications called Adapters. You can configure Adapters in the `openai`,`bedrock` and `vertexai` sections.

You can modify adapters settings using environment variables.

> Refer to these repositories to learn how to configure adapters:
> * [Bedrock Model Deployment](/docs/tutorials/2.devops/0.deployment/2.deployment-of-models/bedrock-model-deployment.md)
> * [OpenAI Model Deployment](/docs/tutorials/2.devops/0.deployment/2.deployment-of-models/openai-model-deployment.md)
> * [Vertex Model Deployment](/docs/tutorials/2.devops/0.deployment/2.deployment-of-models/vertex-model-deployment.md)


## Auth Helper Parameters

> Refer to the [Auth Helper](https://github.com/epam/ai-dial-auth-helper) to view a complete documentation.

You can add [Auth Helper settings](https://github.com/epam/ai-dial-auth-helper#configure) in the `authhelper` section of the AI DIAL values file. 

