# How to Enable Apps in DIAL

This document describes the process for enabling applications in DIAL to make them available for users. The development of applications are beyond the scope of this document.

The prerequisite to the application enablement in DIAL, is a running container with your application. 

> You can develop applications following DIAL Unified API and DIAl SDK.

## Introduction

DIAL can serve as a universal platform that allows using both DIAL-native applications and [applications developed on other platforms](#bring-apps-to-dial).

DIAL-native applications adhere to the [Unified API of DIAL](https://dialx.ai/dial_api), which allows them to be used as building blocks for other DIAL-native applications. Refer to [Agentic Platform](/docs/platform/0.architecture-and-concepts/4.agentic-platform.md) to learn more about agents in DIAL.

These applications can be categorized as either schema-rich or schema-less:

* [Schema-rich applications](#enable-schema-rich-applications) are associated with a specific application type, the structure of which is defined by a JSON schema. The schema specifies the application's properties, bringing them to another abstraction level and enabling end-users to create and configure applications of this typeâ€”that would otherwise be restricted or inaccessible. Application types can be seen as templates for creating applications of that type.
* [Schema-less applications](#enable-schema-less-applications), on the other hand, are not associated with any specific application type and can be enabled by supplying the app's endpoint and some other voluntary parameters.

DIAL SaaS edition includes application types such as Quick app, Code app and Mindmap. In self-hosted deployments of DIAL, you can add new application types, featuring custom UIs and wizards and enabling end-users to create applications of that type. Refer to [Agentic Platform](/docs/platform/0.architecture-and-concepts/4.agentic-platform.md#application-types) to learn more about available application types.

To enable a DIAL-native application in DIAL, you can either modify the DIAL Core configuration directly or use the DIAL API.

**Important**: Apps enabled via the DIAL API, can be modified using API or UI wizards, provided the corresponding permissions are enabled. Apps enabled via the DIAL Core config, are immutable and cannot be modified via UI or API. The owner of such apps is always the admin of the DIAL setup.

## Enable Schema-Rich Applications

Schema-rich applications are defined by a JSON schema, which conforms to the main meta schema. The application type schema includes properties, endpoints, and other parameters that define the application type structure and configuration. Schema can also include a URL of the application editor, which can be used as a wizard on UI to create applications of this type.

##### To enable a schema-rich application in DIAL, follow these steps:

1. Add an application type and its schema directly to the DIAL Core configuration, unless it is already present and you want to use it.
2. After that, you can create apps of this type using DIAL API or directly including them in the DIAL Core config. Some application types allow creating apps using UI wizards as well.

In any case, when a new implementation of the application type is created, its configuration is saved as a BLOB in the DIAL Core file system with a JSON object that must correspond to the schema of this particular application type. This file is available vial the DIAL API, according to the defined Auth Matrix.

### Using API

You can use the DIAL API to enable a schema-rich application of a specific type.

**Important**: Apps enabled via the DIAL API, can be modified using API or UI wizards (if supported), provided the corresponding permissions are enabled.

Send a [PUT](https://dialx.ai/dial_api#tag/Applications/operation/saveCustomApplication) request to DIAL Core, where you provide:

* Standard parameters for the application. Refer to [dynamic setting of DIAL Core](https://github.com/epam/ai-dial-core?tab=readme-ov-file#dynamic-settings).
* `applicationTypeSchemaId`: The identifier of the schema for the application type you want to use as a template. You can retrieve available schemas via the [GET Schemas](https://rail-landing.staging.deltixhub.io/dial_api#tag/Applications/operation/listCustomApplicationSchemas) API call. **Important**: all requests are routed to endpoints defined by the schema.
* `applicationProperties`: A valid JSON object representing the application's structure, conforming to the specified schema. If the JSON object is invalid, the request will fail.
  - If `applicationTypeSchemaId` is absent or `NULL`, `applicationProperties` are not required.
  - If `applicationTypeSchemaId` is provided but `applicationProperties` are `NULL`, the application is considered a "stub" and can be updated later, but completion requests will not be possible.
  - For applications with schemas, all requests are routed to endpoints specified in `applicationProperties`. **Note**: Endpoints provided outside the `applicationProperties` object will fail the request.

    ```json
    //Example for your reference
    {
        "copilot_deck_app": {
          "displayName": "Copilot Deck Explorer",
          "description": "You can ask about the copilot deck there",
          "applicationTypeSchemaId": "https://mydial.epam.com/custom_application_schemas/quickapps",
          "applicationProperties": {
            "temperature": 0.8,
            "instructions": "You should help explore the document containing the Copilot Deck. You must query the document first to do that. You should answer using only the information in the document. Answer \"I don't know\" if there are any other questions.",
            "model": "gpt-4o-2024-05-13",
            "web_api_toolset": [],
            "document_relative_url": "files/DpZGXdhaTxt4FYCWNadE2Ln/GPT%20Deck.docx"
          }
        }
      }
    ```

#### UI Wizard

Application types in DIAL can include UI wizards, which simplify the creation of applications of specific types by end-users on the DIAL UI. Apps built using these wizards are automatically registered in DIAL Core and can be displayed in the DIAL Marketplace if corresponding permissions are enabled.

> Refer to [User guide](/docs/tutorials/0.user-guide.md#applications) to learn how to create applications using wizards.

If your application type's schema includes `dial:applicationTypeEditorUrl`, the related UI wizard will be rendered on the DIAL UI to create/edit an application of that type. The wizard will guide you through the process of configuring the application, and once completed, it will automatically register the application in DIAL Core.

### Using DIAL Core Config

DIAL setup admin can enable a schema-rich application by including a JSON object with apps configurations in the DIAL Core configuration.

**Important**: Apps added through direct modification of the DIAL Core configuration are immutable and cannot be edited via the UI or API, including by setup administrators. These apps are owned by the DIAL admin and are ideal for use cases where the app is configured once and remains unchanged, becoming available to users with predefined roles and limits. 

## Enable Schema-Less Applications

Schema-less applications are not associated with any specific application type and can be enabled by supplying the app's endpoint and some other parameters. Refer to [dynamic setting of DIAL Core](https://github.com/epam/ai-dial-core?tab=readme-ov-file#dynamic-settings) to see all the supported parameters for applications.

To enable schema-less applications in DIAL, you can either include a JSON object with apps configurations in the DIAL Core configuration or use the DIAL API.

In any case, the configuration of an application is saved as a BLOB in the DIAL Core file system with a JSON object. This file is available via the DIAL API, according to the defined Auth Matrix.

### Using API

**Important**: Apps enabled via the DIAL API, can be modified using API or UI wizards, provided the corresponding permissions are enabled.

**Prerequisite**: You must have a running container with your app accessible via the endpoint you provide in the request.

Use the [PUT call](https://dialx.ai/dial_api#tag/Applications/operation/saveCustomApplication), where in the request body you provide specific endpoints and parameters for your application. You can see them in DIAL Core documentation under the [dynamic setting](https://github.com/epam/ai-dial-core?tab=readme-ov-file#dynamic-settings) for `applications`.

```json
//Example for your reference
{
  "application": {
    "endpoint": "http://localhost:7001/openai/deployments/10k/chat/completions",
    "displayName": "MyApp",
    "iconUrl": "https://host/app.svg",
    "description": "My application description",
    "userRoles": ["AdminRole"],
    "forwardAuthToken": true,
    "features": {
      "rateEndpoint": "http://host/rate",
      "configurationEndpoint": "http://host/configure"
    },
    "maxInputAttachments": 10,
    "inputAttachmentTypes": ["type1", "type2"],
    "defaults": {
      "paramStr": "value",
      "paramBool": true,
      "paramInt": 123,
      "paramFloat": 0.25
    },
    "interceptors": ["interceptor1", "interceptor2", "interceptor3"]
  }
}
```

### Using DIAL Core Config

DIAL setup admin can enable a schema-less application by including a JSON object with apps configurations in the DIAL Core configuration.

**Important**: Apps added through direct modification of the DIAL Core configuration are immutable and cannot be edited via the UI or API, including by setup administrators. These apps are owned by the DIAL admin and are ideal for use cases where the app is configured once and remains unchanged, becoming available to users with predefined roles and limits. 


## Bring Apps to DIAL

**In self-hosted deployments of DIAL**, you can create a single access point for all your apps built on other platforms by bringing them to DIAL. 

Following a similar pattern as for DIAL-native applications:

* You can add an application type with a schema to enable end-users to create apps using UI wizards.
* You can add a schema-less application to enable a stand-alone app with a specific configuration. Refer to [DIAL Core dynamic settings](https://github.com/epam/ai-dial-core?tab=readme-ov-file#dynamic-settings) to learn how to register your app's endpoint using `routes` to start using your app in DIAL and access all DIAL Core features.



