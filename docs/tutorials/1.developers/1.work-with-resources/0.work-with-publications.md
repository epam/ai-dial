# Publications

## Introduction

When you create resources in DIAL—such as conversations, prompts, toolsets, or applications—they are stored in your private folder and accessible only to you. You can publish these private resources to make them accessible to other users in DIAL.

By default, published resources are placed in the Public folder, which is available to all authenticated DIAL users. However, you can specify a subfolder in your publication request and apply access rules to restrict visibility to specific user groups or API keys.

**Note**: Published resources can be modified by DIAL admins.

> * Refer to [Collaboration Intro](/docs/platform/7.collaboration-intro.md#publication) to learn more about publications.
> * Refer to [Access Control](/docs/platform/3.core/2.access-control-intro.md#authorization-mechanisms) to learn about public and private resources in DIAL.
> * Watch a [Demo Video](https://www.youtube.com/watch?v=GxdhfWLspa0) to see publication feature in action.

## Publication API

DIAL provides API to work with publications programmatically.

> * Refer to [DIAL API](https://dialx.ai/dial_api#tag/Publications) to view publications endpoints.
> * Refer to [DIAL Chat User Guide](/docs/tutorials/0.user-guide.md#publications) to learn how chat users can publish resources in DIAL Chat.

### User Flow

Create a publication request by calling [/v1/ops/publication/create](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1create/post) endpoint. You can use it to create a mixed publication request, in which you can pass various resources in the request body with different action types. 

For example, you can pass a collection of new prompts with action type `ADD` and another collection of prompts with action type `DELETE`. This way you can **publish** one set of prompts and **unpublish** the other. Similarly, you can handle other resource types (FILE, PROMPT, CONVERSATION, APPLICATION and TOOLSET). 

In the response, you get an object with the `PENDING` status, which is awaiting the action from the admin: approve or reject. While your request is pending, you can delete it by calling [/v1/ops/publication/delete](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1delete/post) endpoint.

#### Access Control

All authenticated DIAL users can access the Public folder by default, but you can publish resources to subfolders and restrict access to them.

To publish resources to a subfolder with restrictions, specify the `targetFolder` and provide `rules` in your [publication request](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1create/post) .

Access rules use three parameters:

* `source`: The claim name (for JWT) or `roles` (for API keys)
* `target`: The claim value (for JWT) or role value(s) from [DIAL Core config (for API keys)](/docs/tutorials/2.devops/2.auth-and-access-control/0.api-keys.md#dial-core-configuration-1)
* `function`: The matching function —`EQUAL`, `CONTAIN`, or `REGEX`

**Example**: Publish a conversation to `public/my-folder/` accessible only to users with `roles=user` in their JWT:

```json
{
    "name": "My publication request",
    "displayAuthor": "John",
    "targetFolder": "public/my-folder/",
    "resources": [
        {
            "action": "ADD",
            "sourceUrl": "conversations/my-conversations/conversation_id",
            "targetUrl": "conversations/public/my-folder/"
        }
    ],
    "rules": [
        {
            "function": "EQUAL",
            "source": "roles",
            "targets": ["user"]
        }
    ]
}
```

##### Get a list of rules for a specific folder

Call [/v1/ops/publication/rules/list](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1rules~1list/post) endpoint to get a list of all rules for the provided path (folder sequence). 

##### Change rules for a specific folder

Call a [/v1/ops/publication/create](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1create/post) endpoint providing a path to a desired folder (`targetFolder`in the request body) and a list of rules to be changed. For instance, if you create a request with `"targetFolder":"public/folder1/folder2/"`, it will only overwrite the rules for `folder2`, while the rules for `folder1` will stay unchanged.

##### Create a publication request without changing rules

Create a [/v1/ops/publication/create](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1create/post) request without the `rules` object to left the rules intact.

##### Effective Rules

> Refer to [Access Control](/docs/platform/3.core/2.access-control-intro.md#hierarchical-structure-of-the-public-space) to learn more about folder structure in public space and how to define access restrictions.

The effective access rules for a folder structure can be described as follows:

1. Within a single folder, the effective access rule is determined by the logical OR operation applied to all the access rules assigned to that folder. For example, in folder A with access rules a, b, and c, the effective rule is "a OR b OR c".
2. Between nested folders, the effective access rule is determined by the logical AND operation applied between the effective rules of the parent folder and its subfolder. For example, if folder B with access rules d, e, and f is nested under folder A, the effective rule for accessing folder B is "(a OR b OR c) AND (d OR e OR f)".

![](../img/rules.svg)

### Admin Flow

DIAL Admins can get a list of publication requests awaiting the decision by calling [/v1/ops/publication/list ](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1list/post) endpoint. Further, you can call [/v1/ops/publication/get](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1get/post) endpoint to get a specific publication request and then execute [/v1/ops/publication/approve](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1approve/post) or [/v1/ops/publication/reject](https://dialx.ai/dial_api#tag/Publications/paths/~1v1~1ops~1publication~1reject/post) to change its status.

> Refer to [DIAL Admin](/docs/tutorials/3.admin/approvals-prompt-publications.md) to learn how to manage publication requests in DIAL Admin UI.
